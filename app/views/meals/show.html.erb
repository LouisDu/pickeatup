<div class="container">
  <div class="row">
    <div class="col-xs-6 ">
      <div class="row">
        <div class="col-xs-12">
          <%= render 'meals/meal_card', meal: @meal %>
        </div>
        <div class="col-xs-12">
          <%= simple_form_for @cart, url: add_to_cart_meals_path, method: :post  do |form| %>
            <%= form.input :meal_quantity, as: :hidden, input_html: { value: 1 } %>
            <%= form.input :meal_price, as: :hidden, input_html: { value: @meal.price } %>
            <%= form.input :meal_id, input_html: { value: @meal.id }, as: :hidden %>
            <%= form.button :submit, "Pick Eat Up", class: 'btn btn-default' %>
          <% end %>

          <% if @meal.average_rating.presence %>
            <%= link_to meal_reviews_path(@meal),{class: "fa.fa-star.colored"} do %>
            Rating: <%= @meal.average_rating %> / 5
            <% end %>
          <% else %>
              No review
          <% end %>
        </div>
      </div>
    </div>

<!-- LE REVIEW FORM DOIT APPARAITRE UNE FOIS LA COMMANDE VALIDE, PAS DANS LE SHOW MEAL -->
    <div class="col-xs-6">
<!-- pourquoi pas un if pour mettre la carte quand le manier est vide -->
      <h3>Mon panier</h3>
      <hr>
      <%= render 'cart', cart_array: session[:cart], bill: session[:bill], pick_up_time: session[:pick_up_time]%>
    </div>
  </div>
</div>
